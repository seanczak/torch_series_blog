function scrollToAnchor(e){var o=$(e);$("html,body").animate({scrollTop:o.offset().top},"slow")}function initializeMap(){map&&map.remove(),$("#map-results").is(":hidden")&&$("#map-results").show(),$(".instructions").hide(),map=L.mapbox.map("map","mapbox.streets",{scrollWheelZoom:!1}),map.setView([37.579412513438385,-98.96484375],5),marker=L.marker(),buffers=L.mapbox.featureLayer()}function showMap(e){initializeMap(),map.setView([e.latlng[0],e.latlng[1]],13),updateMap(map.getCenter())}function setupMap(e){initializeMap(),map.setView([e.latlng[0],e.latlng[1]],13)}function askUserToTryAgain(e){$(".show-target-address").html(e),$(".show-target-point").html("Select a center point to begin."),$(".instructions-failure").show(),$(".payment-button, .fa-check-circle, .instructions-success").hide()}function showNextStepInstructions(){$(".show-target-address").html(address_to_geocode),$(".show-target-point").html("1,3,5 miles around "+address_to_geocode+' <br><span class="note">'+point_for_report+"</span>"),$("#order_description").val('{"point": "'+point_for_report+'","address": "'+address_to_geocode+'"}'),$(".payment-button, .fa-check-circle, .instructions-success").show()}function getUserInput(){return address_to_geocode=$("#address-to-parse").val()}function updateCustomizeYourReportButton(){}function lookup_location(e){geocoder.query(e,function(o,t){t&&t.latlng?(showMap(t,e),showNextStepInstructions()):askUserToTryAgain(e)})}function processGeoJSON(e){buffers=L.mapbox.featureLayer(e),buffers.setStyle({weight:3,color:"#3C7CC9",fillColor:"#3C7CC9",dashArray:"",fillOpacity:.2,opacity:1}),buffers.eachLayer(function(e){e.on("click",function(){})}),map.fitBounds(buffers.getBounds()),marker.addTo(map),buffers.addTo(map),showNextStepInstructions()}function updateMap(e){map.removeLayer(marker),map.removeLayer(buffers),marker=L.marker(e,{draggable:!0,icon:L.mapbox.marker.icon({"marker-color":"#f86767"})}),marker.bindPopup(address_to_geocode+", POINT ("+e.lng+" "+e.lat+")"),point_for_report="POINT("+e.lng+" "+e.lat+")",marker.on("dragend",function(){updateMap(marker.getLatLng())}),$.post("/buffers/preview.json",{latitude:e.lat,longitude:e.lng},function(o){processGeoJSON(o,e)}).fail(function(e){console.log("Error: "+e.responseText)})}$(document).ready(function(){$("#openModal .close").on("click",function(){$("#openModal").hide(),$("body").removeClass("modal-open")}),$(".showmodal").on("click",function(){$("#openModal").show(),$("body").addClass("modal-open")}),Highcharts.theme={colors:["#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#f1c40f","#e67e22","#16a085","#f39c12"],chart:{backgroundColor:"#fdfdfd",style:{color:"#2c3e50",fontFamily:"sans-serif",fontSize:"12px"}},title:{style:{color:"#2c3e50"}},labels:{style:{color:"red"}},legend:{borderWidth:0},yAxis:{title:{style:{color:"#2c3e50"}}},credits:!1},Highcharts.setOptions(Highcharts.theme)}),L.mapbox.accessToken="pk.eyJ1IjoiYW50bSIsImEiOiJhbHh1ZERvIn0.uhmJTh7NTy7F3DNyyAfymw";var address_to_geocode,buffer_geojson,buffers,geocoder=L.mapbox.geocoder("mapbox.places"),map,marker,point_for_report,source_value;