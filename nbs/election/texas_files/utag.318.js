//tealium universal tag - utag.318 ut4.0.202007171604, Copyright 2020 Tealium.com Inc. All Rights Reserved.
function getScrollbarWidth(){var outer=document.createElement("div");outer.style.visibility="hidden";outer.style.width="100px";outer.style.msOverflowStyle="scrollbar";document.body.appendChild(outer);var widthNoScroll=outer.offsetWidth;outer.style.overflow="scroll";var inner=document.createElement("div");inner.style.width="100%";outer.appendChild(inner);var widthWithScroll=inner.offsetWidth;outer.parentNode.removeChild(outer);return widthNoScroll-widthWithScroll;}
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag===undefined){utag={};}
if(utag.ut===undefined){utag.ut={};}
if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";b.src=o.src;}
if(o.id){b.id=o.id;}
if(typeof o.cb==="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){this.onreadystatechange=null;o.cb();}};}}
l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1};u.initialized=false;u.map={"ad_unit_section":"ad_unit","content_id":"content_id","internal_site_id":"site","content_tag_commas":"content_tag_commas","content_author_commas":"content_author_commas","page_type":"page_type","free_paid_content":"free_paid_content","page_level_1":"page_level_1","dom.referrer":"referrer","hp_server_refresh":"hp_server_refresh","enable_prebid":"enable_prebid"};u.extend=[function(a,b){try{if((b['enable_prebid'].toString().toLowerCase()=='true'.toLowerCase()&&b['site_domain'].toString().toLowerCase().indexOf('west.ops.politico.com'.toLowerCase())<0&&b['site_domain'].toString().toLowerCase().indexOf('qablue'.toLowerCase())<0)){(function(){var id='prebid';if(!document.getElementById(id)){var adScript=document.createElement('script');adScript.id=id;adScript.async='true';adScript.type='text/javascript';var useSSL='https:'==document.location.protocol;adScript.src=(useSSL?'https:':'http:')+'//acdn.adnxs.com/prebid/c/7917/pb.js';var scriptInsert=document.getElementsByTagName('script')[0];scriptInsert.parentNode.insertBefore(adScript,scriptInsert);}})();}}catch(e){utag.DB(e)}},function(a,b){try{if(b['active_device'].toString().toLowerCase()=='Android'.toLowerCase()||b['active_device'].toString().toLowerCase()=='iPhone'.toLowerCase()||b['active_device'].toString().toLowerCase()=='iPad'.toLowerCase()||b['active_device'].toString().toLowerCase()=='Windows tablet'.toLowerCase()||b['active_device'].toString().toLowerCase()=='BlackBerry'.toLowerCase()||b['active_device'].toString().toLowerCase()=='Windows phone'.toLowerCase()){(function(){var adScript=document.createElement('script');adScript.async='true';adScript.type='text/javascript';var useSSL='https:'==document.location.protocol;adScript.src=(useSSL?'https:':'http:')+'//confiant-integrations.global.ssl.fastly.net/NZD0M0OBz2-7bntA9GZmnQ6AMFI/gpt_and_prebid/config.js';var scriptInsert=document.getElementsByTagName('script')[0];scriptInsert.parentNode.insertBefore(adScript,scriptInsert);})();}}catch(e){utag.DB(e)}},function(a,b){try{if(1){utag.dfp=utag.dfp||{};utag.dfp.displayAds=window.displayAds=function(config,lazyLoad,slot,clicktoload){lazyLoad=(typeof lazyLoad==='undefined')?false:true;clicktoload=(typeof clicktoload==='undefined')?false:clicktoload;slot=(typeof slot==='undefined')?'':slot;var pbjs=window.pbjs||{};if(typeof googletag!=='undefined'){window.adsRefreshed=true;var i=0;var slotName;var targetPosition;for(i;i<config.length;i++){slotName=config[i].id;targetPosition=config[i].targetPosition
var isDynamicAd=parseInt(targetPosition)>=100
if(pbjs.infiniteScroll&&isDynamicAd){var adSlotPreId=slotName.match(/pol\-(vp|\d*)/)[0]
var adSlotInteractives=slotName.match(/^pol\-(\d){3}\-(cube|supercube|leaderboard)$/)
var adSlotPostId=''
if(adSlotInteractives){adSlotPreId='pol-990-'
adSlotPostId=adSlotInteractives[2]}
if(adSlotPreId==='pol-vp'){var dynamicAdSlotId=slotName.match(/\d+$/)[0]
if(dynamicAdSlotId>=200){adSlotPostId='-'+(parseInt(targetPosition)-1)}else{adSlotPostId='-00'}}
var targetAdUnitCode=adSlotPreId+adSlotPostId
apstag.fetchBids({timeout:5000,slots:[{"slotID":slotName,"slotName":config[i].slotName,"sizes":[[300,250],[320,250],[630,250]]}]},function(bids){console.debug('Recevied Amazon TAM bids',bids)
apstag.setDisplayBids();pbjs.addAdUnits(pbjs.adUnits.filter(function(unit){return unit.code===targetAdUnitCode}).map(function(unit){return Object.assign({},unit,{code:slotName,labelAny:undefined,transactionId:undefined})}));pbjs.requestBids({bidsBackHandler:function(bids){pbjs.setTargetingForGPTAsync();pbjs.refreshAds([slotName])}})})}else if(slot===''||slot===slotName){if((typeof config[i].lazyLoad==='undefined'||config[i].lazyLoad===lazyLoad)&&(typeof config[i].clicktoload==='undefined'||config[i].clicktoload===clicktoload)){window.adSlots[slotName]=googletag.cmd.push(function(){googletag.display(slotName);if(!isNaN(config[i].targetPosition)){googletag.pubads().refresh([gptadslots[config[i].targetPosition]],{changeCorrelator:false});}});}}}}}
utag.dfp.generateCustomAds=window.generateCustomAds=function(selector,size){var placeholder=document.querySelector(selector);if(placeholder){window.customAdsConfig=window.customAdsConfig||[];var index=window.customAdsConfig.length+991;var config=null;var slot={};if(size=='cube'){var id='pol-'+index+'-cube';placeholder.innerHTML='<div id="'+id+'"></div>';slot[id]={'adtype':id,'lazyLoad':false,'dccat':'null','isflex':true,'moduleid':id,'pg':u.data.ad_unit,'pos':index,'sz':[{'definition':[0,0],'sizes':[[300,250]]}],'tile':index};}
else if(size=='leaderboard'){var id='pol-'+index+'-leaderboard';placeholder.innerHTML='<div id="'+id+'"></div>';slot[id]={'adtype':id,'lazyLoad':false,'dccat':'null','isflex':true,'moduleid':id,'pg':u.data.ad_unit,'pos':index,'sz':[{'definition':[0,0],'sizes':[[320,50],[300,50]]},{'definition':[730-scrollbarWidth,60],'sizes':[[728,90]]},{'definition':[980-scrollbarWidth,60],'sizes':[[970,90],[728,90]]}],'tile':index};}
else{var id='pol-'+index+'-supercube';placeholder.innerHTML='<div id="'+id+'"></div>';slot[id]={'adtype':id,'lazyLoad':false,'dccat':'null','isflex':true,'moduleid':id,'pg':u.data.ad_unit,'pos':index,'sz':[{'definition':[0,0],'sizes':[[300,250],[320,250]]},{'definition':[730-scrollbarWidth,60],'sizes':[[640,250],[300,250],[728,90]]},{'definition':[1020-scrollbarWidth,60],'sizes':[[1000,250],[970,250],[300,250],[970,90]]},{'definition':[1180-scrollbarWidth,60],'sizes':[[1160,250],[970,250],[300,250],[1160,400],[970,90]]}],'tile':index};}
config=utag.dfp.generateConfig(slot,true);utag.dfp.loadAds(config,true);utag.dfp.displayAds(config);window.customAdsConfig.push(config);}}}}catch(e){utag.DB(e)}},function(a,b){try{if(typeof b['dom.referrer']!='undefined'&&b['dom.referrer']!=''){try{b['dom.referrer']=b["dom.referrer"].match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i)[2]}catch(e){}}}catch(e){utag.DB(e);}}];u.send=function(a,b){var adsLoaded=false;if(typeof window.gptadslots!=='undefined'){if(window.gptadslots.length>0){adsLoaded=true;}}
if(!adsLoaded){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,i;u.data={"base_url":"//securepubads.g.doubleclick.net/tag/js/gpt.js","ad_unit":"default","network_id":"6326","site":"politico","scrollbar_width":getScrollbarWidth(),"content_id":"","content_tag_commas":"","content_author_commas":"","page_type":"","page_level_1":"","referrer":"","cid":"","enable_prebid":"","page_level_3":""};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
var ad_unit=u.data.ad_unit,isLessonsFromLeaders=false;var site=u.data.site;window.adsRefreshed=false;window.gptadslots=window.gptadslots||[];window.googletag=window.googletag||{};window.googletag.cmd=window.googletag.cmd||[];window.scrollbarWidth=u.data.scrollbar_width;u.loader_cb=function(){u.initialized=true;window.adSlots={};window.adstruct_all_ads={'pol-01':{'adtype':'pol-01','lazyLoad':false,'dccat':'null','isflex':true,'moduleid':'pol-01','pg':u.data.ad_unit,'pos':1,'sz':[{'definition':[0,0],'sizes':[[320,50]]},{'definition':[748-scrollbarWidth,50],'sizes':[[1,1],[728,90]]},{'definition':[990-scrollbarWidth,50],'sizes':[[1,1],[970,90],[728,90],[970,250]]}],'tile':1},'pol-02':{'adtype':'pol-02','lazyLoad':false,'dccat':'null','isflex':true,'moduleid':'pol-02','pg':u.data.ad_unit,'pos':2,'sz':[{'definition':[0,0],'sizes':[[300,250]]}],'tile':2},'pol-03':{'adtype':'pol-03','lazyLoad':false,'dccat':'null','isflex':true,'moduleid':'pol-03','pg':u.data.ad_unit,'pos':1,'sz':[{'definition':[0,0],'sizes':[[320,50]]},{'definition':[748-scrollbarWidth,50],'sizes':[[728,90]]},{'definition':[990-scrollbarWidth,50],'sizes':[[970,90],[728,90]]}],'tile':3},'pol-04':{'adtype':'pol-04','lazyLoad':false,'dccat':'null','isflex':true,'moduleid':'pol-04','pg':u.data.ad_unit,'pos':4,'sz':[{'definition':[0,0],'sizes':[[300,250]]}],'tile':4},'pol-05':{'adtype':'pol-05','lazyLoad':false,'dccat':'null','isflex':false,'moduleid':'pol-05','pg':u.data.ad_unit,'pos':5,'sz':[{'definition':[0,0],'sizes':[[300,250]]}],'tile':5},'pol-06':{'adtype':'pol-06','dccat':'null','isflex':true,'moduleid':'pol-06','pg':u.data.ad_unit,'pos':6,'sz':[{'definition':[0,0],'sizes':[[300,250],[320,250]]},{'definition':[730-scrollbarWidth,60],'sizes':[[640,250],[300,250],[728,90]]},{'definition':[1020-scrollbarWidth,60],'sizes':[[1000,250],[300,250],[970,250],[970,90]]},{'definition':[1180-scrollbarWidth,60],'sizes':[[1160,250],[300,250],[970,250],[1160,400],[970,90]]}],'tile':6},'pol-07':{'adtype':'pol-07','dccat':'null','isflex':true,'moduleid':'pol-07','pg':u.data.ad_unit,'pos':7,'sz':[{'definition':[0,0],'sizes':[[300,250],[320,250]]},{'definition':[730-scrollbarWidth,60],'sizes':[[640,250],[300,250],[728,90]]},{'definition':[1020-scrollbarWidth,60],'sizes':[[1000,250],[300,250],[970,250],[970,90]]},{'definition':[1180-scrollbarWidth,60],'sizes':[[1160,250],[300,250],[970,250],[1160,400],[970,90]]}],'tile':7},'pol-08':{'adtype':'pol-08','lazyLoad':false,'dccat':'null','isflex':true,'moduleid':'pol-08','pg':u.data.ad_unit,'pos':8,'sz':[{'definition':[0,0],'sizes':[[300,250],[320,250]]},{'definition':[730-scrollbarWidth,60],'sizes':[[640,250],[300,250],[728,90]]},{'definition':[1020-scrollbarWidth,60],'sizes':[[1000,250],[300,250],[970,250],[970,90]]},{'definition':[1180-scrollbarWidth,60],'sizes':[[1160,250],[300,250],[970,250],[1160,400],[970,90]]}],'tile':8},'pol-09':{'adtype':'pol-09','lazyLoad':false,'dccat':'null','isflex':true,'moduleid':'pol-09','pg':u.data.ad_unit,'pos':9,'sz':[{'definition':[0,0],'sizes':[[300,250],[320,250]]},{'definition':[730-scrollbarWidth,60],'sizes':[[640,250],[300,250],[728,90]]},{'definition':[1020-scrollbarWidth,60],'sizes':[[1000,250],[300,250],[970,250],[970,90]]},{'definition':[1180-scrollbarWidth,60],'sizes':[[1160,250],[300,250],[970,250],[1160,400],[970,90]]}],'tile':9}};window.adsConfig=utag.dfp.generateConfig(adstruct_all_ads);utag.dfp.loadAds(window.adsConfig,true);var bidsApstag=false;var bidsPbjs=false;if(u.data.enable_prebid==true){apstag.fetchBids({timeout:5000,slots:utag.dfp.createAmazonConfig(window.adsConfig)},function(bids){console.log('Recevied bids from Amazon TAM',bids);apstag.setDisplayBids();bidsApstag=true;if(bidsApstag&&bidsPbjs){utag.dfp.handleFirstAuctionEnd();}})
var pbjs=window.pbjs=window.pbjs||{que:[]};pbjs.que.push(function(){pbjs.onEvent('addAdUnits',function addAdUnits(){pbjs.offEvent('addAdUnits',addAdUnits);pbjs.requestBids({bidsBackHandler:function(bids){console.log('Received bids from Prebid.js',bids);pbjs.setTargetingForGPTAsync();bidsPbjs=true;if(bidsPbjs&&bidsApstag){utag.dfp.handleFirstAuctionEnd();}}})});});}
else{utag.dfp.initAds();}};if(!u.initialized){u.loader({"type":"script","src":u.data.base_url,"cb":u.loader_cb,"loc":"script","id":'utag_318'});}else{u.loader_cb();}
}}};utag.o[loader].loader.LOAD(id);})("318","politico.main");}catch(error){utag.DB(error);}
